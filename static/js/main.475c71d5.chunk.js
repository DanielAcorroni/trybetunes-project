(this.webpackJsonptrybetunes=this.webpackJsonptrybetunes||[]).push([[0],{18:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),c=a(23),r=a.n(c),s=(a(18),a(15)),o=a(4),l=a(5),d=a(7),u=a(6),b=a(2),j=a(13),h=a(3),m="user",p=function(e){return localStorage.setItem(m,JSON.stringify(e))},O=function(e){return function(t){setTimeout((function(){t(e)}),1500)}},v=function(){return new Promise((function(e){var t=JSON.parse(localStorage.getItem(m));null===t&&(t={}),O(t)(e)}))},f=function(e){return new Promise((function(t){p(Object(s.a)(Object(s.a)({},{name:"",email:"",image:"",description:""}),e)),O("OK")(t)}))},g=a.p+"static/media/trybe-tunes-logo.a5ed5a85.png",x=a(0),k=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).getUserName=e.getUserName.bind(Object(h.a)(e)),e.state={userName:"",userImage:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){(0,this.getUserName)()}},{key:"getUserName",value:function(){var e=this;v().then((function(t){e.setState({userName:t.name,userImage:t.image})}))}},{key:"render",value:function(){var e=this.state,t=e.userName,a=e.userImage;return Object(x.jsxs)("header",{"data-testid":"header-component",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:g,alt:"TrybeTunes logo"}),Object(x.jsx)("h1",{children:"TrybeTunes"})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)(j.b,{"data-testid":"link-to-search",to:"/search",children:"Search"}),Object(x.jsx)(j.b,{"data-testid":"link-to-favorites",to:"/favorites",children:"Favorites"}),Object(x.jsx)(j.b,{"data-testid":"link-to-profile",to:"/profile",children:"Profile"})]}),Object(x.jsxs)("div",{className:"header-user",children:[Object(x.jsx)("img",{src:a||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Foto do usuario"}),Object(x.jsx)("p",{"data-testid":"header-user-name",children:t||"...Carregando"})]})]})}}]),a}(i.a.Component),y=a(14),C=a.n(y),N=a(17),S=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://itunes.apple.com/lookup?id=".concat(t,"&entity=song"));case 2:return a=e.sent,e.next=5,a.json();case 5:return n=e.sent,e.abrupt("return",n.results);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=S,w=a(12),L=a(26),U="favorite_songs";JSON.parse(localStorage.getItem(U))||localStorage.setItem(U,JSON.stringify([]));var D=function(){return JSON.parse(localStorage.getItem(U))},F=function(e){return localStorage.setItem(U,JSON.stringify(e))},M=function(e){return function(t){setTimeout((function(){t(e)}),500)}},P=function(){return new Promise((function(e){var t=D();M(t)(e)}))},T=function(e){return new Promise((function(t){var a=D();F(a.filter((function(t){return t.trackId!==e.trackId}))),M("OK")(t)}))},J=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onChange=e.onChange.bind(Object(h.a)(e)),e.loadCheckbox=e.loadCheckbox.bind(Object(h.a)(e)),e.state={favorite:!1},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadCheckbox()}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.checked,i=this.props,c=i.previewUrl,r=i.trackId,s=i.trackName;this.setState(Object(w.a)({},a,n));var o={trackId:r,trackName:s,previewUrl:c};this.setState({},(function(){var e;!0===n?(e=o,new Promise((function(t){if(e){var a=D();F([].concat(Object(L.a)(a),[e]))}M("OK")(t)}))):!1===n&&T(o)}))}},{key:"loadCheckbox",value:function(){var e=this;P().then((function(t){var a=t,n=e.props.trackName;a.forEach((function(t){t.trackName===n&&e.setState({favorite:!0})}))}))}},{key:"render",value:function(){var e=this.props,t=e.previewUrl,a=e.trackId,n=e.trackName,i=this.state.favorite;return Object(x.jsxs)("div",{className:"music-card-play",children:[Object(x.jsx)("h4",{children:n}),Object(x.jsxs)("audio",{"data-testid":"audio-component",src:t,controls:!0,children:[Object(x.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(x.jsx)("code",{children:"audio"}),"."]}),Object(x.jsxs)("label",{htmlFor:a,children:["Favorita",Object(x.jsx)("input",{"data-testid":"checkbox-music-".concat(a),type:"checkbox",name:"favorite",id:a,onChange:this.onChange,checked:i})]})]})}}]),a}(i.a.Component),E=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadMusics=e.loadMusics.bind(Object(h.a)(e)),e.state={musicsAlbum:[]},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadMusics()}},{key:"loadMusics",value:function(){var e=this,t=this.props.match.params.id;I(t).then((function(t){e.setState({musicsAlbum:t})}))}},{key:"render",value:function(){var e=this.state.musicsAlbum;return Object(x.jsxs)("div",{"data-testid":"page-album",children:[Object(x.jsx)(k,{}),Object(x.jsx)("div",{className:"album-close-look",children:e.map((function(e){return e.previewUrl?Object(x.jsx)(J,{trackId:e.trackId,previewUrl:e.previewUrl,trackName:e.trackName},e.trackId):Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:e.artworkUrl100,alt:e.collectionName}),Object(x.jsx)("p",{"data-testid":"artist-name",children:e.artistName}),Object(x.jsx)("p",{"data-testid":"album-name",children:e.collectionName})]},e.collectionName)}))})]})}}]),a}(i.a.Component),A=a.p+"static/media/loading.c7d9f081.gif",H=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{className:"loading-container",children:[Object(x.jsx)("img",{src:A,alt:"Loading animation"}),Object(x.jsx)("p",{children:"Carregando..."})]})}}]),a}(i.a.Component),K=H,_=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadFavorites=e.loadFavorites.bind(Object(h.a)(e)),e.onChange=e.onChange.bind(Object(h.a)(e)),e.state={isLoading:!1,favoriteSongs:[],favorite:!0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadFavorites()}},{key:"onChange",value:function(e){var t=this,a=e.target.id;console.log(typeof a);var n=this.state.favoriteSongs.filter((function(e){return console.log(e.trackId),"".concat(e.trackId)===a}));console.log(n[0]),this.setState({isLoading:!0},(function(){T(n[0]).then((function(){t.setState({isLoading:!1},(function(){return t.loadFavorites()}))}))}))}},{key:"loadFavorites",value:function(){var e=this;this.setState({isLoading:!0}),P().then((function(t){e.setState({isLoading:!1,favoriteSongs:t})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLoading,n=t.favoriteSongs,i=t.favorite;return!0===a?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(k,{}),Object(x.jsx)(K,{})]}):Object(x.jsxs)("div",{"data-testid":"page-favorites",children:[Object(x.jsx)(k,{}),Object(x.jsxs)("main",{className:"favorite-songs-container",children:[Object(x.jsx)("h1",{children:"M\xfasicas favoritas"}),Object(x.jsx)("div",{className:"favorite-songs",children:n.map((function(t){return Object(x.jsxs)("div",{children:[Object(x.jsx)("h4",{children:t.trackName}),Object(x.jsxs)("audio",{"data-testid":"audio-component",src:t.previewUrl,controls:!0,children:[Object(x.jsx)("track",{kind:"captions"}),"O seu navegador n\xe3o suporta o elemento"," ",Object(x.jsx)("code",{children:"audio"}),"."]},t.trackId),Object(x.jsxs)("label",{htmlFor:t.trackId,children:["Favorita",Object(x.jsx)("input",{type:"checkbox",name:"favorite",id:t.trackId,onChange:e.onChange,checked:i})]})]},t.trackId)}))})]})]})}}]),a}(i.a.Component),R=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onChange=e.onChange.bind(Object(h.a)(e)),e.onClick=e.onClick.bind(Object(h.a)(e)),e.state={user:"",buttonDisabled:!0,isLoading:!1,logged:!1},e}return Object(l.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n="checkbox"===t.type?t.checked:t.value;this.setState(Object(w.a)({},a,n)),n.length>=3?this.setState({buttonDisabled:!1}):this.setState({buttonDisabled:!0})}},{key:"onClick",value:function(){var e=this,t=this.state.user;this.setState({isLoading:!0},Object(N.a)(C.a.mark((function a(){return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,f({name:t});case 2:e.setState({isLoading:!1,logged:!0});case 3:case"end":return a.stop()}}),a)}))))}},{key:"render",value:function(){var e=this.state,t=e.user,a=e.buttonDisabled,n=e.isLoading,i=e.logged;return n?Object(x.jsx)(K,{}):Object(x.jsxs)("div",{"data-testid":"page-login",className:"login-container",children:[Object(x.jsx)("img",{src:g,alt:"Logo TrybeTunes"}),Object(x.jsx)("h1",{children:"TrybeTunes"}),Object(x.jsx)("input",{type:"text",name:"user",id:"login","data-testid":"login-name-input",onChange:this.onChange,value:t}),Object(x.jsx)("button",{type:"button",disabled:a,onClick:this.onClick,"data-testid":"login-submit-button",children:"Entrar"}),!0===i&&Object(x.jsx)(b.a,{to:"/search"})]})}}]),a}(i.a.Component),B=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(x.jsxs)("div",{"data-testid":"page-not-found",children:[Object(x.jsx)(k,{}),Object(x.jsx)("p",{children:"NotFound"})]})}}]),a}(i.a.Component),q=B,z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadUser=e.loadUser.bind(Object(h.a)(e)),e.state={isLoading:!1,description:"",email:"",image:"",name:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"loadUser",value:function(){var e=this;this.setState({isLoading:!0}),v().then((function(t){var a=t.email,n=t.description,i=t.image,c=t.name;e.setState({description:n,email:a,image:i,name:c,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.description,a=e.email,n=e.image,i=e.name,c=e.isLoading;return Object(x.jsxs)("div",{"data-testid":"page-profile",children:[Object(x.jsx)(k,{}),!0===c&&Object(x.jsx)(K,{}),Object(x.jsxs)("main",{className:"profile-container",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:i}),Object(x.jsx)("img",{"data-testid":"profile-image",src:n||"https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_1280.png",alt:"Profile avatar",width:"100px"}),Object(x.jsxs)("p",{children:["Email:"," ",a]}),Object(x.jsxs)("p",{children:["Descri\xe7\xe3o:"," ",t]})]}),Object(x.jsx)(j.b,{to:"/profile/edit",children:"Editar perfil"})]})]})}}]),a}(i.a.Component),G=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).loadUser=e.loadUser.bind(Object(h.a)(e)),e.onChange=e.onChange.bind(Object(h.a)(e)),e.buttonHandler=e.buttonHandler.bind(Object(h.a)(e)),e.onClick=e.onClick.bind(Object(h.a)(e)),e.state={isLoading:!1,buttonDisabled:!0,saved:!1,description:"",email:"",image:"",name:""},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadUser()}},{key:"onChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(w.a)({},a,n),this.setState({buttonDisabled:this.buttonHandler()}))}},{key:"onClick",value:function(){var e,t=this,a=this.state,n=a.description,i=a.email,c=a.image,r={name:a.name,email:i,image:c,description:n};this.setState({isLoading:!0}),(e=r,new Promise((function(t){p(Object(s.a)({},e)),O("OK")(t)}))).then((function(){t.setState({isLoading:!1,saved:!0})}))}},{key:"buttonHandler",value:function(){var e=this.state,t=e.description,a=e.email,n=e.image,i=e.name;return t.length<2||(a.length<2||(n.length<2||i.length<2))}},{key:"loadUser",value:function(){var e=this;this.setState({isLoading:!0}),v().then((function(t){var a=t.email,n=t.description,i=t.image,c=t.name;e.setState({description:n,email:a,image:i,name:c,isLoading:!1,buttonDisabled:e.buttonHandler()})}))}},{key:"render",value:function(){var e=this.state,t=e.description,a=e.email,n=e.image,i=e.name,c=e.isLoading,r=e.buttonDisabled,s=e.saved;return Object(x.jsxs)("div",{"data-testid":"page-profile-edit",children:[Object(x.jsx)(k,{}),!0===c&&Object(x.jsx)(K,{}),Object(x.jsxs)("form",{className:"edit-profile-form",children:[Object(x.jsxs)("label",{htmlFor:"name-input",children:["Name:",Object(x.jsx)("input",{type:"text",name:"name",id:"name-input",onChange:this.onChange,value:i,"data-testid":"edit-input-name"})]}),Object(x.jsxs)("label",{htmlFor:"image-input",children:["Profile picture:",Object(x.jsx)("input",{type:"text",name:"image",id:"image-input",onChange:this.onChange,value:n,"data-testid":"edit-input-image"})]}),Object(x.jsxs)("label",{htmlFor:"email",children:["Email:",Object(x.jsx)("input",{type:"email",name:"email",id:"email-input",onChange:this.onChange,value:a,"data-testid":"edit-input-email"})]}),Object(x.jsxs)("label",{htmlFor:"description-input",children:["Description:",Object(x.jsx)("textarea",{name:"description",id:"description-input",onChange:this.onChange,value:t,"data-testid":"edit-input-description"})]}),Object(x.jsx)("button",{type:"button","data-testid":"edit-button-save",disabled:r,onClick:this.onClick,children:"Editar perfil"}),!0===s&&Object(x.jsx)(b.a,{to:"/profile"})]})]})}}]),a}(i.a.Component),Q=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props.album,t=e.artistName,a=e.collectionId,n=e.collectionName,i=e.artworkUrl100,c="/album/".concat(a);return Object(x.jsx)(j.b,{to:c,"data-testid":"link-to-album-".concat(a),className:"music-card",children:Object(x.jsxs)("div",{className:"music-cards-div",children:[Object(x.jsx)("img",{src:i,alt:"Imagem do \xe1lbum"}),Object(x.jsx)("p",{children:n}),Object(x.jsx)("p",{children:t})]})})}}]),a}(i.a.Component),V=Q,W=function(){var e=Object(N.a)(C.a.mark((function e(t){var a,n,i,c,r,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t).replaceAll("%20","+"),n="https://itunes.apple.com/search?entity=album&term=".concat(a,"&attribute=allArtistTerm"),e.next=4,fetch(n);case 4:return i=e.sent,e.next=7,i.json();case 7:return c=e.sent,r=c.results,s=r.map((function(e){return{artistId:e.artistId,artistName:e.artistName,collectionId:e.collectionId,collectionName:e.collectionName,collectionPrice:e.collectionPrice,artworkUrl100:e.artworkUrl100,releaseDate:e.releaseDate,trackCount:e.trackCount}})),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=W,Y=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).onChange=e.onChange.bind(Object(h.a)(e)),e.onClick=e.onClick.bind(Object(h.a)(e)),e.state={artist:"",prevSearch:"",buttonDisabled:!0,isLoading:!1,albunsInterface:[],loaded:!1},e}return Object(l.a)(a,[{key:"onChange",value:function(e){var t=e.target,a=t.name,n="checkbox"===t.type?t.checked:t.value;this.setState(Object(w.a)({},a,n)),n.length>=2?this.setState({buttonDisabled:!1}):this.setState({buttonDisabled:!0})}},{key:"onClick",value:function(){var e=this,t=this.state.artist;this.setState({isLoading:!0}),X(t).then((function(a){e.setState({isLoading:!1,albunsInterface:a,prevSearch:t,artist:"",loaded:!0})}))}},{key:"render",value:function(){var e=this.state,t=e.artist,a=e.buttonDisabled,n=e.isLoading,i=e.albunsInterface,c=e.loaded,r=e.prevSearch,s="Resultado de \xe1lbuns de: ".concat(r);return!0===n?Object(x.jsxs)("div",{className:"search-loading",children:[Object(x.jsx)(k,{}),Object(x.jsx)(K,{})]}):Object(x.jsxs)("div",{"data-testid":"page-search",className:"teste",children:[Object(x.jsx)(k,{}),Object(x.jsxs)("div",{className:"all-cards-container",children:[Object(x.jsx)("input",{name:"artist","data-testid":"search-artist-input",type:"text",value:t,onChange:this.onChange,placeholder:"Digite o nome de um artista ou banda"}),Object(x.jsx)("button",{"data-testid":"search-artist-button",type:"button",disabled:a,onClick:this.onClick,children:"Procurar"}),!0===c&&Object(x.jsx)("p",{children:s}),Object(x.jsx)("div",{className:"musics-container",children:i.length>0?i.map((function(e){return Object(x.jsx)(V,{album:e},e.collectionId)})):Object(x.jsx)("p",{children:"Nenhum \xe1lbum foi encontrado"})})]})]})}}]),a}(i.a.Component),Z=function(e){Object(d.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(x.jsx)(j.a,{children:Object(x.jsxs)(b.d,{children:[Object(x.jsx)(b.b,{exact:!0,path:"/trybetunes-project",children:Object(x.jsx)(R,{})}),Object(x.jsx)(b.b,{path:"/trybetunes-project/search",children:Object(x.jsx)(Y,{})}),Object(x.jsx)(b.b,{path:"/trybetunes-project/album/:id",render:function(e){return Object(x.jsx)(E,Object(s.a)({},e))}}),Object(x.jsx)(b.b,{path:"/trybetunes-project/favorites",children:Object(x.jsx)(_,{})}),Object(x.jsx)(b.b,{exact:!0,path:"/trybetunes-project/profile",children:Object(x.jsx)(z,{})}),Object(x.jsx)(b.b,{path:"/trybetunes-project/profile/edit",render:function(e){return Object(x.jsx)(G,Object(s.a)({},e))}}),Object(x.jsx)(b.b,{path:"*",children:Object(x.jsx)(q,{})})]})})}}]),a}(i.a.Component),$=Z;r.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)($,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.475c71d5.chunk.js.map